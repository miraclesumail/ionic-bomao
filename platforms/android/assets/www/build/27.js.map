{"version":3,"sources":["../../src/pages/money/remove-bind/remove-bind.module.ts","../../src/providers/service/fund-service/bankcard-service.ts","../../src/pages/money/remove-bind/remove-bind.ts"],"names":[],"mappings":"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","file":"27.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { RemoveBindPage } from './remove-bind';\nimport {BankcardService} from \"../../../providers/service/fund-service/bankcard-service\";\n\n@NgModule({\n  declarations: [\n    RemoveBindPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RemoveBindPage),\n  ],\n  providers:[BankcardService]\n})\nexport class RemoveBindPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/money/remove-bind/remove-bind.module.ts","import {Injectable} from '@angular/core';\nimport {observe} from \"../../tools/observe\";\nimport {HttpClientProvider} from \"../../http-client/http-client\";\nimport {GlobalShareProvider} from \"../../global-share/global-share\";\n\nlet _ = new observe();\n\ninterface widthDrawRequestParamater {\n  id: any,\n  account: any,\n  fund_password: string,\n  amount: any,\n  _token: string\n}\n\n\n@Injectable()\nexport class BankcardService {\n\n  constructor(public httpclient: HttpClientProvider, private share: GlobalShareProvider) {\n    _.observe(this.bindBankCardRequestType,'update', () => this.postBindCardServer());\n    this.initSetting();\n  }\n\n  isBindBankCard = false;\n  drawMoneyCount = 2.0;\n  withdrawData = {data: {accounts: {available: 0, withdrawable: 0}, bank_cards: []}};\n  fund_password: string;\n  defautbankcard = {\n    \"id\": \"\",\n    \"account\": \"\",\n    \"account_name\": \"\",\n    \"bank\": \"\",\n    \"province\": \"\",\n    \"city\": \"\"\n  }\n\n  initSetting() {\n\n  }\n\n  /**\n   * 提款页面接口\n   */\n  async getRemoteServer() {\n    let data = await this.httpclient.get('/mobileh5-withdrawals/withdraw');\n    try {\n      this.withdrawData = data;\n      this.defautbankcard = data.data.bank_cards[0];\n      this.isBindBankCard = true;\n    } catch (e) {\n      this.isBindBankCard = false;\n    }\n  }\n\n\n  parameters: widthDrawRequestParamater = {id: '', account: '', fund_password: '', amount: '', _token: ''};\n\n  getParameters(): widthDrawRequestParamater {\n\n    this.parameters._token = this.share.user.token;\n    this.parameters.amount = this.drawMoneyCount;\n    this.parameters.account = this.defautbankcard.account;\n    this.parameters.fund_password = this.fund_password;\n    this.parameters.id = this.defautbankcard.id;\n    return this.parameters;\n  }\n\n  /**\n   * 提款数据提交接口\n   */\n  autoManufacturers: any;\n\n  postRemoteServer() {\n    return this.httpclient.post('/mobileh5-withdrawals/withdraw/1', this.getParameters());\n  }\n\n  bindBankCardRequestType = {id: 0};\n\n  bindBankCardPostParameter = {\n    _token: '',\n    bank_id: '',\n    province_id: '',\n    city_id: '',\n    branch: '',\n    account_confirmation: '',\n    account: '',\n    account_name: ''\n  }\n\n  getbindBankCardPostParameter() {\n    this.bindBankCardPostParameter._token = this.share.user.token;\n    return this.bindBankCardPostParameter;\n\n  }\n\n  postBindCardServer() {\n    return this.httpclient.post('/mobileh5-bank-cards/0/bind-card', this.getParameters());\n  }\n\n  /**\n   * 绑卡提交接口\n   * @return {Observable<R>}\n   */\n\n  async bindBankCardPostRemoteServer() {\n    let result = await this.bindBankCardPostRemoteServerAsync();\n    result.isSuccess && this.getRemoteServer();\n  }\n  bindBankCardPostRemoteServerAsync():Promise<any>{\n    return this.httpclient.post(`/mobileh5-bank-cards/2/bind-card`, this.getbindBankCardPostParameter());\n  }\n  ValidedBankCardPParameters = {\n    _token: '',\n    id: '',\n    fund_password: '',\n    account: '',\n    account_name: ''\n  }\n\n  /**\n   * 银行卡验证接口,如果用户没有绑定银行卡.就会直接到/mobileh5-bank-cards/1/bind-card,获取银行列表和城市列表\n   * @return {{_token: string, id: string, fund_password: string, account: string, account_name: string}}\n   */\n  getValidedBankCardPParameters() {\n    this.ValidedBankCardPParameters._token = this.share.user.token;\n    return this.ValidedBankCardPParameters;\n  }\n\n  RemovedBankCardPParameters = {\n    _token: '',\n    account_name: '',\n    account: '',\n    fund_password: '',\n    id: ''\n  }\n\n  getRemovedBankCardPParameters() {\n    this.ValidedBankCardPParameters._token = this.share.user.token;\n    return this.ValidedBankCardPParameters;\n  }\n\n\n  /**\n   * 删除银行卡接口\n   * @return {Observable<R>}\n   */\n\n\n  async removeBankCardPostRemoteServer():Promise<any> {\n    let result = await this.httpclient.post('/mobileh5-bank-cards/destroy', this.getRemovedBankCardPParameters());\n      result.isSuccess && this.getRemoteServer();\n  }\n\n\n  /**\n   * 绑卡页面,用于获取城市列表,银行名称列表\n   *\n   */\n  getBankCardInformationPostRemoteServer():Promise<any> {\n    return this.httpclient.post('/mobileh5-bank-cards/1/bind-card', {_token: this.share.user.token});\n  }\n\n  drawAll() {\n    this.drawMoneyCount = this.withdrawData.data.accounts.withdrawable;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/service/fund-service/bankcard-service.ts","import {Component} from '@angular/core';\nimport {IonicPage, NavController, NavParams} from 'ionic-angular';\nimport {Config} from \"../../../config/config\";\nimport {BankcardService} from \"../../../providers/service/fund-service/bankcard-service\";\nimport {GlobalShareProvider} from \"../../../providers/global-share/global-share\";\n\n/**\n * Generated class for the RemoveBindPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-remove-bind',\n  templateUrl: 'remove-bind.html',\n})\nexport class RemoveBindPage {\n\n  bankcard = {account_name: '', bank: '', account: '', id: ''}\n  bankcardIconMap = Config.bankcardIconMap;\n\n  constructor(public share:GlobalShareProvider,public navCtrl: NavController, public params: NavParams, public bankcardService: BankcardService) {\n    this.bankcard = this.params.get('bankcard');\n  }\n\n  showConfirm() {\n    this.share.showAlert(\n      '确定解除该绑定的银行卡？',\n      [{text: '取消', handler: () => {}},\n        {text: '是的', handler: () => this.removeBankcard()}]\n    );\n  }\n\n  removeBankcard() {\n    this.bankcardService.RemovedBankCardPParameters.account_name = this.bankcard.account_name;\n    this.bankcardService.RemovedBankCardPParameters.id = this.bankcard.id;\n    this.bankcardService.RemovedBankCardPParameters.account = this.bankcard.account;\n    setTimeout(() => this.removeBankcardAction(), 500);\n  }\n\n  removeBankcardAction() {\n    this.share.showAlert(\n      '资金密码',\n      [{text: '取消', handler: data => {}},\n        {text: '保存', handler: data => {\n            if (!data.password) {\n              this.share.showToast('请输入资金密码');\n            } else {\n              this.bankcardService.RemovedBankCardPParameters.fund_password = data.password;\n              this.aaa(prompt);\n            }\n            return false;\n          }\n        }],\n      '',\n      '',\n      [{type: 'password',\n          name: 'password',\n          placeholder: '输入资金密码'}]\n    );\n  }\n\n  async aaa(prompt) {\n    let data = await this.bankcardService.removeBankCardPostRemoteServer();\n    if (data.isSuccess) {\n      this.share.showToast('银行上解绑成功');\n      prompt.dismiss();\n      setTimeout(() => this.navCtrl.pop(), 1000);\n    } else {\n      this.share.showToast(data.Msg);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/money/remove-bind/remove-bind.ts"],"sourceRoot":""}